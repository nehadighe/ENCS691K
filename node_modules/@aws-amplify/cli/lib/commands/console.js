"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.run = void 0;
const open_1 = __importDefault(require("open"));
const amplify_cli_core_1 = require("amplify-cli-core");
const providerName = 'awscloudformation';
exports.run = async (context) => {
    let consoleUrl = getDefaultURL();
    try {
        const localEnvInfo = amplify_cli_core_1.stateManager.getLocalEnvInfo(undefined, {
            throwIfNotExist: false,
            default: {},
        });
        const teamProviderInfo = amplify_cli_core_1.stateManager.getTeamProviderInfo(undefined, {
            throwIfNotExist: false,
            default: {},
        });
        const { envName } = localEnvInfo;
        const { Region, AmplifyAppId } = teamProviderInfo[envName][providerName];
        if (envName && AmplifyAppId) {
            consoleUrl = constructStatusURL(Region, AmplifyAppId, envName);
        }
    }
    catch (e) {
        context.print.error(e.message);
    }
    context.print.green(consoleUrl);
    open_1.default(consoleUrl, { wait: false });
};
function constructStatusURL(region, appId, envName) {
    const prodURL = `https://${region}.console.aws.amazon.com/amplify/home?region=${region}#/${appId}/YmFja2VuZA/${envName}`;
    return prodURL;
}
function getDefaultURL() {
    const prodURL = `https://console.aws.amazon.com/amplify/home#/create`;
    return prodURL;
}
//# sourceMappingURL=console.js.map
{"remainingRequest":"/Users/elchoco/concordia/fall_20_classes/ENCS691/final_project/front/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/elchoco/concordia/fall_20_classes/ENCS691/final_project/front/src/components/Auth/SignUpForm.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/elchoco/concordia/fall_20_classes/ENCS691/final_project/front/src/components/Auth/SignUpForm.vue","mtime":1602462384257},{"path":"/Users/elchoco/concordia/fall_20_classes/ENCS691/final_project/front/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/elchoco/concordia/fall_20_classes/ENCS691/final_project/front/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/elchoco/concordia/fall_20_classes/ENCS691/final_project/front/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/elchoco/concordia/fall_20_classes/ENCS691/final_project/front/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IEF1dGggfSBmcm9tICJhd3MtYW1wbGlmeSI7CmltcG9ydCB7IG1hcEFjdGlvbnMgfSBmcm9tICJ2dWV4IjsKaW1wb3J0IFJlZ2lzdGVyIGZyb20gIi4vUmVnaXN0ZXIiOwppbXBvcnQgVmVyaWZpY2F0aW9uIGZyb20gIi4vVmVyaWZpY2F0aW9uIjsKCmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAiU2lnbkluRm9ybSIsCiAgY29tcG9uZW50czogewogICAgUmVnaXN0ZXIsCiAgICBWZXJpZmljYXRpb24KICB9LAogIGRhdGE6ICgpID0+ICh7CiAgICB0aGVtZUNvbG9yOiAiIzkwMDAyOCIsCiAgICB1c2VybmFtZTogIiIsCiAgICBzbmFja3RpbWVvdXQ6IDgwMDAsCiAgICBhbGVydDogZmFsc2UsCiAgICB0ZXh0OiBudWxsLAogICAgY29sb3I6IG51bGwsCiAgICByZXF1ZXN0TG9hZGluZzogZmFsc2UsCiAgICBsb2NhbFNpZ25VcFN0YXRlOiAicmVnaXN0ZXIiCiAgfSksCiAgbWV0aG9kczogewogICAgLi4ubWFwQWN0aW9ucyhbInJlc2V0QXBwU3RhdGUiLCAidXNlclNpZ25VcCJdKSwKICAgIGFzeW5jIHNpZ25VcChldmVudCkgewogICAgICB0aGlzLnJlcXVlc3RMb2FkaW5nID0gdHJ1ZTsKICAgICAgaWYgKCFldmVudC52YWxpZCkgewogICAgICAgICh0aGlzLnRleHQgPSAiSW5wdXQgc29tZSB0ZXh0IiksCiAgICAgICAgICAodGhpcy5jb2xvciA9ICIjOTAwMDI4IiksCiAgICAgICAgICAodGhpcy5hbGVydCA9IHRydWUpOwogICAgICAgIHRoaXMucmVxdWVzdExvYWRpbmcgPSBmYWxzZTsKICAgICAgICByZXR1cm47CiAgICAgIH0gZWxzZSBpZiAoZXZlbnQucGFzc3dvcmQgIT0gZXZlbnQuY29uZmlybVBhc3N3b3JkKSB7CiAgICAgICAgKHRoaXMudGV4dCA9ICJQYXNzd29yZHMgbXVzdCBiZSBzYW1lIiksCiAgICAgICAgICAodGhpcy5jb2xvciA9ICIjOTAwMDI4IiksCiAgICAgICAgICAodGhpcy5hbGVydCA9IHRydWUpOwogICAgICAgIHRoaXMucmVxdWVzdExvYWRpbmcgPSBmYWxzZTsKICAgICAgICByZXR1cm47CiAgICAgIH0KICAgICAgdHJ5IHsKICAgICAgICB0aGlzLnVzZXJuYW1lID0gZXZlbnQudXNlci51c2VybmFtZTsKICAgICAgICBsZXQgdXNlcm5hbWUsIHBhc3N3b3JkLCBlbWFpbDsKICAgICAgICB1c2VybmFtZSA9IGV2ZW50LnVzZXIudXNlcm5hbWU7CiAgICAgICAgcGFzc3dvcmQgPSBldmVudC5wYXNzd29yZDsKICAgICAgICBlbWFpbCA9IGV2ZW50LnVzZXIuZW1haWw7CiAgICAgICAgLy8gc2VuZGluZyB0aGlzIGRhdGEgdG8gQ29nbml0bwogICAgICAgIGNvbnN0IHsgdXNlciB9ID0gYXdhaXQgQXV0aC5zaWduVXAoewogICAgICAgICAgdXNlcm5hbWUsCiAgICAgICAgICBwYXNzd29yZCwKICAgICAgICAgIGF0dHJpYnV0ZXM6IHsKICAgICAgICAgICAgZW1haWwgLy8gb3B0aW9uYWwKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgICBjb25zb2xlLmxvZygnbGluZSA4NC0gJywgdXNlcik7CiAgICAgICAgZXZlbnQudXNlci5hdXRoZW50aWNhdGVkID0gdHJ1ZSAvLyBhZGRpbmcgYXV0aGVudGljYXRpb24gcHJvcGVydHkKICAgICAgICB0aGlzLnVzZXJTaWduVXAoZXZlbnQudXNlcik7IC8vIHNlbmRpbmcgZGF0YSB0byB0aGUgc3RvcmUKICAgICAgICAodGhpcy50ZXh0ID0gIllvdXIgYWNjb3VudCBoYXMgYmVlbiBjcmVhdGVkIHN1Y2Nlc3NmdWxseSEiKSwKICAgICAgICAgICh0aGlzLmNvbG9yID0gInN1Y2Nlc3MiKSwKICAgICAgICAgICh0aGlzLmFsZXJ0ID0gdHJ1ZSk7CiAgICAgICAgLy8gY2hhbmdpbmcgbG9jYWwgc2lnblVwIHN0YXRlIGZvciBhY2NvdW50IHZlcmlmaWNhdGlvbgogICAgICAgIHRoaXMubG9jYWxTaWduVXBTdGF0ZSA9ICJ2ZXJpZmljYXRpb24iOwogICAgICAgIHRoaXMucmVxdWVzdExvYWRpbmcgPSBmYWxzZTsKICAgICAgfSBjYXRjaCAoZXJyb3IpIHsKICAgICAgICAodGhpcy50ZXh0ID0gZXJyb3IubWVzc2FnZSksCiAgICAgICAgICAodGhpcy5jb2xvciA9ICIjOTAwMDI4IiksCiAgICAgICAgICAodGhpcy5hbGVydCA9IHRydWUpOwogICAgICAgIHRoaXMucmVxdWVzdExvYWRpbmcgPSBmYWxzZTsKICAgICAgfQogICAgfSwKICAgIGFzeW5jIHZlcmlmeUNvZGUoZXZlbnQpIHsKICAgICAgdGhpcy5yZXF1ZXN0TG9hZGluZyA9IHRydWU7CiAgICAgIHRyeSB7CiAgICAgICAgYXdhaXQgQXV0aC5jb25maXJtU2lnblVwKHRoaXMudXNlcm5hbWUsIGV2ZW50LmNvZGUpOwogICAgICAgIHRoaXMucmVxdWVzdExvYWRpbmcgPSBmYWxzZTsKICAgICAgICB0aGlzLiRyb3V0ZXIucHVzaCh7IG5hbWU6ICJob21lIiB9KTsKICAgICAgfSBjYXRjaCAoZXJyb3IpIHsKICAgICAgICAodGhpcy50ZXh0ID0gZXJyb3IubWVzc2FnZSksCiAgICAgICAgICAodGhpcy5jb2xvciA9ICIjOTAwMDI4IiksCiAgICAgICAgICAodGhpcy5hbGVydCA9IHRydWUpOwogICAgICAgIHRoaXMucmVxdWVzdExvYWRpbmcgPSBmYWxzZTsKICAgICAgfQogICAgfSwKICAgIGFzeW5jIHJlc2VudFZlcmlmaWNhdGlvbigpIHsKICAgICAgLy8gdGhpcyBhdm9pZCBvdmVybG9hZGluZyB0aGUgcmVzZW5kIG9mIGV2ZW50cyB3aXRob3V0IHRoZSBIVFRQIGVycm9yCiAgICAgIHRyeSB7CiAgICAgICAgYXdhaXQgQXV0aC5yZXNlbmRTaWduVXAodGhpcy51c2VybmFtZSk7CiAgICAgICAgKHRoaXMudGV4dCA9ICJDb2RlIHJlc2VudCBzdWNjZXNzZnVsbHkiKSwKICAgICAgICAgICh0aGlzLmNvbG9yID0gInN1Y2Nlc3MiKSwKICAgICAgICAgICh0aGlzLmFsZXJ0ID0gdHJ1ZSk7CiAgICAgIH0gY2F0Y2ggKGVycikgewogICAgICAgICh0aGlzLnRleHQgPSBlcnIubWVzc2FnZSksCiAgICAgICAgICAodGhpcy5jb2xvciA9ICIjOTAwMDI4IiksCiAgICAgICAgICAodGhpcy5hbGVydCA9IHRydWUpOwogICAgICAgIGNvbnNvbGUubG9nKCJlcnJvciByZXNlbmRpbmcgY29kZTogIiwgZXJyKTsKICAgICAgfQogICAgfSwKICAgIHJlc2V0U3RhdGUoKSB7CiAgICAgIHRoaXMucmVzZXRBcHBTdGF0ZSgpOwogICAgfQogIH0KfTsK"},{"version":3,"sources":["SignUpForm.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+BA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"SignUpForm.vue","sourceRoot":"src/components/Auth","sourcesContent":["<template>\n  <div class>\n    <v-card min-width=\"300\" max-width=\"800\" class=\"card-signing elevation-2\">\n      <!-- data is going to have to be sent down to the children -->\n      <Register\n        v-if=\"localSignUpState === 'register'\"\n        v-on:signUp=\"signUp($event)\"\n        v-on:resetState=\"resetState()\"\n        :requestLoading=\"requestLoading\"\n        :themeColor=\"themeColor\"\n      />\n      <Verification\n        v-if=\"localSignUpState === 'verification'\"\n        v-on:verifyCode=\"verifyCode($event)\"\n        v-on:resentVerification=\"resentVerification()\"\n        :themeColor=\"themeColor\"\n      />\n    </v-card>\n    <!-- Banner -->\n    <v-snackbar :color=\"color\" :timeout=\"snacktimeout\" v-model=\"alert\">\n      <div class=\"d-flex flex-row align-center justify-space-between\">\n        <p class=\"mb-0 white--text\">{{ text }}</p>\n        <v-btn color=\"white\" text @click=\"alert = false\">\n          <v-icon small>mdi-window-close</v-icon>\n        </v-btn>\n      </div>\n    </v-snackbar>\n  </div>\n</template>\n\n<script>\nimport { Auth } from \"aws-amplify\";\nimport { mapActions } from \"vuex\";\nimport Register from \"./Register\";\nimport Verification from \"./Verification\";\n\nexport default {\n  name: \"SignInForm\",\n  components: {\n    Register,\n    Verification\n  },\n  data: () => ({\n    themeColor: \"#900028\",\n    username: \"\",\n    snacktimeout: 8000,\n    alert: false,\n    text: null,\n    color: null,\n    requestLoading: false,\n    localSignUpState: \"register\"\n  }),\n  methods: {\n    ...mapActions([\"resetAppState\", \"userSignUp\"]),\n    async signUp(event) {\n      this.requestLoading = true;\n      if (!event.valid) {\n        (this.text = \"Input some text\"),\n          (this.color = \"#900028\"),\n          (this.alert = true);\n        this.requestLoading = false;\n        return;\n      } else if (event.password != event.confirmPassword) {\n        (this.text = \"Passwords must be same\"),\n          (this.color = \"#900028\"),\n          (this.alert = true);\n        this.requestLoading = false;\n        return;\n      }\n      try {\n        this.username = event.user.username;\n        let username, password, email;\n        username = event.user.username;\n        password = event.password;\n        email = event.user.email;\n        // sending this data to Cognito\n        const { user } = await Auth.signUp({\n          username,\n          password,\n          attributes: {\n            email // optional\n          }\n        });\n        console.log('line 84- ', user);\n        event.user.authenticated = true // adding authentication property\n        this.userSignUp(event.user); // sending data to the store\n        (this.text = \"Your account has been created successfully!\"),\n          (this.color = \"success\"),\n          (this.alert = true);\n        // changing local signUp state for account verification\n        this.localSignUpState = \"verification\";\n        this.requestLoading = false;\n      } catch (error) {\n        (this.text = error.message),\n          (this.color = \"#900028\"),\n          (this.alert = true);\n        this.requestLoading = false;\n      }\n    },\n    async verifyCode(event) {\n      this.requestLoading = true;\n      try {\n        await Auth.confirmSignUp(this.username, event.code);\n        this.requestLoading = false;\n        this.$router.push({ name: \"home\" });\n      } catch (error) {\n        (this.text = error.message),\n          (this.color = \"#900028\"),\n          (this.alert = true);\n        this.requestLoading = false;\n      }\n    },\n    async resentVerification() {\n      // this avoid overloading the resend of events without the HTTP error\n      try {\n        await Auth.resendSignUp(this.username);\n        (this.text = \"Code resent successfully\"),\n          (this.color = \"success\"),\n          (this.alert = true);\n      } catch (err) {\n        (this.text = err.message),\n          (this.color = \"#900028\"),\n          (this.alert = true);\n        console.log(\"error resending code: \", err);\n      }\n    },\n    resetState() {\n      this.resetAppState();\n    }\n  }\n};\n</script>\n\n<style>\n@import \"../../assets/colors.css\";\n@import \"../../assets/line.css\";\n\n.card-signing {\n  padding: 30px;\n}\n\n.extraTextStyle {\n  transition: 0.3s ease;\n  color: #b08c62 !important;\n}\n\n.extraTextStyle:hover {\n  transition: 0.3s ease;\n  color: #ad712a !important;\n}\n</style>"]}]}
{"remainingRequest":"/Users/elchoco/concordia/fall_20_classes/ENCS691/final_project/front/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/elchoco/concordia/fall_20_classes/ENCS691/final_project/front/src/components/Auth/LoginForm.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/elchoco/concordia/fall_20_classes/ENCS691/final_project/front/src/components/Auth/LoginForm.vue","mtime":1602977181359},{"path":"/Users/elchoco/concordia/fall_20_classes/ENCS691/final_project/front/node_modules/cache-loader/dist/cjs.js","mtime":1602977161337},{"path":"/Users/elchoco/concordia/fall_20_classes/ENCS691/final_project/front/node_modules/babel-loader/lib/index.js","mtime":1602977174460},{"path":"/Users/elchoco/concordia/fall_20_classes/ENCS691/final_project/front/node_modules/cache-loader/dist/cjs.js","mtime":1602977161337},{"path":"/Users/elchoco/concordia/fall_20_classes/ENCS691/final_project/front/node_modules/vue-loader/lib/index.js","mtime":1602977169995}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IEF1dGggfSBmcm9tICJhd3MtYW1wbGlmeSI7CmltcG9ydCB7IG1hcEFjdGlvbnMgfSBmcm9tICJ2dWV4IjsKaW1wb3J0IExvZ2luIGZyb20gIi4vTG9naW4iOwppbXBvcnQgRm9yZ290UGFzcyBmcm9tICIuL0ZvcmdvdFBhc3MiOwoKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICJMb2dpbkZvcm0iLAogIGNvbXBvbmVudHM6IHsKICAgIExvZ2luLAogICAgRm9yZ290UGFzcwogIH0sCiAgZGF0YTogKCkgPT4gKHsKICAgIHRoZW1lQ29sb3I6ICIjOTAwMDI4IiwKICAgIGV5ZTogZmFsc2UsCiAgICB2YWxpZDogdHJ1ZSwKICAgIHJ1bGVzOiB7CiAgICAgIHJlcXVpcmVkOiBbdiA9PiAhIXYgfHwgIlJlcXVpcmVkLiJdCiAgICB9LAogICAgc25hY2t0aW1lb3V0OiA4MDAwLAogICAgYWxlcnQ6IGZhbHNlLAogICAgdGV4dDogbnVsbCwKICAgIGNvbG9yOiBudWxsLAogICAgcmVxdWVzdExvYWRpbmc6IGZhbHNlLAogICAgbG9jYWxMb2dpblN0YXRlOiAibG9naW4iCiAgfSksCiAgbWV0aG9kczogewogICAgLi4ubWFwQWN0aW9ucyhbInJlc2V0QXBwU3RhdGUiLCAidXNlckxvb2tVcCJdKSwKICAgIGZvcmdvdFBhc3N3b3JkKCkgewogICAgICB0aGlzLmxvY2FsTG9naW5TdGF0ZSA9ICJmb3Jnb3RQYXNzIjsKICAgIH0sCiAgICAvLyBzZW5kaW5nIGNvZGUgdG8gY2hhbmdlIHBhc3N3b3JkIHRvIHVzZXJuYW1lCiAgICBhc3luYyBzZW5kKGV2ZW50KSB7CiAgICAgIHRoaXMucmVxdWVzdExvYWRpbmcgPSB0cnVlOwogICAgICBhd2FpdCBBdXRoLmZvcmdvdFBhc3N3b3JkKGV2ZW50LnVzZXJuYW1lKQogICAgICAgIC50aGVuKCgpID0+IHsKICAgICAgICAgIC8vIG9uY2UgcGFzc3dvcmQgaGFzIGJlZW4gcmVzZXQKICAgICAgICAgIC8vIGdvIGJhY2sgdG8gbG9naW4gYWdhaW4KICAgICAgICAgICh0aGlzLnRleHQgPSAiWW91ciBjb2RlIGhhcyBiZWVuIHNlbnQiKSwKICAgICAgICAgICAgKHRoaXMuY29sb3IgPSAic3VjY2VzcyIpLAogICAgICAgICAgICAodGhpcy5hbGVydCA9IHRydWUpOwogICAgICAgICAgdGhpcy5yZXF1ZXN0TG9hZGluZyA9IGZhbHNlOwogICAgICAgICAgLy8gY29uc29sZS5sb2coImxpbmUgNjksIHNlbmQgbWV0aG9kIGZyb20gZm9yZ290IHBhc3N3b3JkIiwgZGF0YSk7CiAgICAgICAgfSkKICAgICAgICAuY2F0Y2goZXJyb3IgPT4gewogICAgICAgICAgKHRoaXMudGV4dCA9IGVycm9yLm1lc3NhZ2UpLAogICAgICAgICAgICAodGhpcy5jb2xvciA9ICIjOTAwMDI4IiksCiAgICAgICAgICAgICh0aGlzLmFsZXJ0ID0gdHJ1ZSk7CiAgICAgICAgICB0aGlzLnJlcXVlc3RMb2FkaW5nID0gZmFsc2U7CiAgICAgICAgfSk7CiAgICB9LAogICAgLy8gY2hhbmdpbmcgb2xkIHBhc3N3b3JkIHRvIGEgbmV3IHBhc3N3b3JkCiAgICBhc3luYyBjaGFuZ2UoZXZlbnQpIHsKICAgICAgLy8gY29uc29sZS5sb2coJ2xpbmUgODAgLSBjaGFuZ2UnLCBldmVudCk7CiAgICAgIHRoaXMucmVxdWVzdExvYWRpbmcgPSB0cnVlOwogICAgICBpZiAoZXZlbnQucGFzc3dvcmQgIT0gZXZlbnQuY29uZmlybVBhc3N3b3JkKSB7CiAgICAgICAgKHRoaXMudGV4dCA9ICJQYXNzd29yZHMgbXVzdCBiZSBzYW1lIiksCiAgICAgICAgICAodGhpcy5jb2xvciA9ICIjOTAwMDI4IiksCiAgICAgICAgICAodGhpcy5hbGVydCA9IHRydWUpOwogICAgICAgIHRoaXMucmVxdWVzdExvYWRpbmcgPSBmYWxzZTsKICAgICAgICByZXR1cm47CiAgICAgIH0KICAgICAgYXdhaXQgQXV0aC5mb3Jnb3RQYXNzd29yZFN1Ym1pdCgKICAgICAgICBldmVudC51c2VyLnVzZXJuYW1lLAogICAgICAgIGV2ZW50LmNvZGUsCiAgICAgICAgZXZlbnQucGFzc3dvcmQKICAgICAgKQogICAgICAgIC50aGVuKCgpID0+IHsKICAgICAgICAgIGV2ZW50LnVzZXIuYXV0aGVudGljYXRlZCA9IHRydWUgLy8gYWRkaW5nIGF1dGhlbnRpY2F0aW9uIHByb3BlcnR5CiAgICAgICAgICB0aGlzLnVzZXJMb2dJbihldmVudC51c2VyKTsgLy8gc2VuZGluZyBkYXRhIHRvIHRoZSBzdG9yZQogICAgICAgICAgdGhpcy5yZXF1ZXN0TG9hZGluZyA9IGZhbHNlOwogICAgICAgICAgdGhpcy4kcm91dGVyLnB1c2goeyBuYW1lOiAiaG9tZSIgfSk7CiAgICAgICAgICAvLyBjb25zb2xlLmxvZygibGluZSA5NSwgY2hhbmdlIG1ldGhvZCBmcm9tIGZvcmdvdCBwYXNzd29yZCBzdWJtaXQiLCBkYXRhKTsKICAgICAgICB9KQogICAgICAgIC5jYXRjaChlcnIgPT4gewogICAgICAgICAgKHRoaXMudGV4dCA9IGVyci5tZXNzYWdlKSwKICAgICAgICAgICAgKHRoaXMuY29sb3IgPSAiIzkwMDAyOCIpLAogICAgICAgICAgICAodGhpcy5hbGVydCA9IHRydWUpOwogICAgICAgICAgdGhpcy5yZXF1ZXN0TG9hZGluZyA9IGZhbHNlOwogICAgICAgIH0pOwogICAgfSwKICAgIC8vIGdvaW5nIGJhY2sgZnJvbSBmb3Jnb3QgcGFzc3dvcmQgY29tcG9uZW50CiAgICAvLyB0byBsb2dpbiBjb21wb25lbnQKICAgIGJhY2soKSB7CiAgICAgIHRoaXMubG9jYWxMb2dpblN0YXRlID0gImxvZ2luIjsKICAgIH0sCiAgICBhc3luYyBsb2dpbihldmVudCkgewogICAgICB0aGlzLnJlcXVlc3RMb2FkaW5nID0gdHJ1ZTsKICAgICAgaWYgKCFldmVudC52YWxpZCkgewogICAgICAgICh0aGlzLnRleHQgPSAiSW5wdXQgc29tZSB0ZXh0IiksCiAgICAgICAgICAodGhpcy5jb2xvciA9ICIjOTAwMDI4IiksCiAgICAgICAgICAodGhpcy5hbGVydCA9IHRydWUpOwogICAgICAgIHRoaXMucmVxdWVzdExvYWRpbmcgPSBmYWxzZTsKICAgICAgICByZXR1cm47CiAgICAgIH0KICAgICAgbGV0IHVzZXJuYW1lLCBwYXNzd29yZDsKICAgICAgdXNlcm5hbWUgPSBldmVudC51c2VyLnVzZXJuYW1lOwogICAgICBwYXNzd29yZCA9IGV2ZW50LnBhc3N3b3JkOwogICAgICBhd2FpdCBBdXRoLnNpZ25Jbih1c2VybmFtZSwgcGFzc3dvcmQpCiAgICAgICAgLnRoZW4oKCkgPT4gewogICAgICAgICAgLy8gc2hvdWxkIGxvb2sgYXQgdGhlIHBvb2wgb2YgdXNlcnMgaW4gdGhlIHN0b3JlLCBhbmQgc2hvdWxkCiAgICAgICAgICAvLyBnZXQgdGhhdCB1c2VyIHRvIGRpc3BsYXkgaW4gdGhlIGFwcGxpY2F0aW9uCiAgICAgICAgICAKICAgICAgICAgIC8vIGFkZGluZyBhdXRoZW50aWNhdGlvbiBwcm9wZXJ0eTogbG9naWNhbCBpc3N1ZSEKICAgICAgICAgIC8vIGlmIGFkZGluZyBpdCBiZWZvcmUsIHRoZSBoZWFkZXIgd2lsbAogICAgICAgICAgLy8gbG9hZCBmaXJzdCBiZWZvcmUgZXZlbiBnb2luZyB0byB0aGUKICAgICAgICAgIC8vIGhvbWUKICAgICAgICAgIGV2ZW50LnVzZXIuYXV0aGVudGljYXRlZCA9IHRydWUKICAgICAgICAgIHRoaXMudXNlckxvb2tVcChldmVudC51c2VyKTsgLy8gbG9va2luZyB1cCB1c2VyIGluZm9ybWF0aW9uCiAgICAgICAgICB0aGlzLnJlcXVlc3RMb2FkaW5nID0gZmFsc2U7CiAgICAgICAgICB0aGlzLiRyb3V0ZXIucHVzaCh7IG5hbWU6ICJob21lIiB9KTsKICAgICAgICB9KQogICAgICAgIC5jYXRjaChlcnJvciA9PiB7CiAgICAgICAgICAodGhpcy50ZXh0ID0gZXJyb3IubWVzc2FnZSksCiAgICAgICAgICAgICh0aGlzLmNvbG9yID0gIiM5MDAwMjgiKSwKICAgICAgICAgICAgKHRoaXMuYWxlcnQgPSB0cnVlKTsKICAgICAgICAgIHRoaXMucmVxdWVzdExvYWRpbmcgPSBmYWxzZTsKICAgICAgICB9KTsKICAgIH0sCiAgICByZXNldFN0YXRlKCkgewogICAgICB0aGlzLnJlc2V0QXBwU3RhdGUoKTsKICAgIH0KICB9Cn07Cg=="},{"version":3,"sources":["LoginForm.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAiCA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"LoginForm.vue","sourceRoot":"src/components/Auth","sourcesContent":["<template>\n  <div>\n    <v-card min-width=\"450\" class=\"card-signing elevation-2\">\n      <Login\n        v-if=\"localLoginState === 'login'\"\n        v-on:login=\"login($event)\"\n        v-on:forgotPassword=\"forgotPassword()\"\n        v-on:resetState=\"resetState()\"\n        :requestLoading=\"requestLoading\"\n        :themeColor=\"themeColor\"\n      />\n      <ForgotPass\n        v-if=\"localLoginState === 'forgotPass'\"\n        v-on:send=\"send($event)\"\n        v-on:change=\"change($event)\"\n        v-on:back=\"back()\"\n        :requestLoading=\"requestLoading\"\n        :themeColor=\"themeColor\"\n      />\n    </v-card>\n    <v-snackbar :color=\"color\" :timeout=\"snacktimeout\" v-model=\"alert\">\n      <!-- <v-snackbar :color=\"bannerColor\" timeout=\"30000\" :v-model=\"bannerAlert\"> -->\n      <div class=\"d-flex flex-row align-center justify-space-between\">\n        <p class=\"mb-0\">{{ text }}</p>\n        <v-btn color=\"white\" text @click=\"alert = false\">\n          <v-icon small>mdi-window-close</v-icon>\n        </v-btn>\n      </div>\n    </v-snackbar>\n  </div>\n</template>\n\n<script>\nimport { Auth } from \"aws-amplify\";\nimport { mapActions } from \"vuex\";\nimport Login from \"./Login\";\nimport ForgotPass from \"./ForgotPass\";\n\nexport default {\n  name: \"LoginForm\",\n  components: {\n    Login,\n    ForgotPass\n  },\n  data: () => ({\n    themeColor: \"#900028\",\n    eye: false,\n    valid: true,\n    rules: {\n      required: [v => !!v || \"Required.\"]\n    },\n    snacktimeout: 8000,\n    alert: false,\n    text: null,\n    color: null,\n    requestLoading: false,\n    localLoginState: \"login\"\n  }),\n  methods: {\n    ...mapActions([\"resetAppState\", \"userLookUp\"]),\n    forgotPassword() {\n      this.localLoginState = \"forgotPass\";\n    },\n    // sending code to change password to username\n    async send(event) {\n      this.requestLoading = true;\n      await Auth.forgotPassword(event.username)\n        .then(() => {\n          // once password has been reset\n          // go back to login again\n          (this.text = \"Your code has been sent\"),\n            (this.color = \"success\"),\n            (this.alert = true);\n          this.requestLoading = false;\n          // console.log(\"line 69, send method from forgot password\", data);\n        })\n        .catch(error => {\n          (this.text = error.message),\n            (this.color = \"#900028\"),\n            (this.alert = true);\n          this.requestLoading = false;\n        });\n    },\n    // changing old password to a new password\n    async change(event) {\n      // console.log('line 80 - change', event);\n      this.requestLoading = true;\n      if (event.password != event.confirmPassword) {\n        (this.text = \"Passwords must be same\"),\n          (this.color = \"#900028\"),\n          (this.alert = true);\n        this.requestLoading = false;\n        return;\n      }\n      await Auth.forgotPasswordSubmit(\n        event.user.username,\n        event.code,\n        event.password\n      )\n        .then(() => {\n          event.user.authenticated = true // adding authentication property\n          this.userLogIn(event.user); // sending data to the store\n          this.requestLoading = false;\n          this.$router.push({ name: \"home\" });\n          // console.log(\"line 95, change method from forgot password submit\", data);\n        })\n        .catch(err => {\n          (this.text = err.message),\n            (this.color = \"#900028\"),\n            (this.alert = true);\n          this.requestLoading = false;\n        });\n    },\n    // going back from forgot password component\n    // to login component\n    back() {\n      this.localLoginState = \"login\";\n    },\n    async login(event) {\n      this.requestLoading = true;\n      if (!event.valid) {\n        (this.text = \"Input some text\"),\n          (this.color = \"#900028\"),\n          (this.alert = true);\n        this.requestLoading = false;\n        return;\n      }\n      let username, password;\n      username = event.user.username;\n      password = event.password;\n      await Auth.signIn(username, password)\n        .then(() => {\n          // should look at the pool of users in the store, and should\n          // get that user to display in the application\n          \n          // adding authentication property: logical issue!\n          // if adding it before, the header will\n          // load first before even going to the\n          // home\n          event.user.authenticated = true\n          this.userLookUp(event.user); // looking up user information\n          this.requestLoading = false;\n          this.$router.push({ name: \"home\" });\n        })\n        .catch(error => {\n          (this.text = error.message),\n            (this.color = \"#900028\"),\n            (this.alert = true);\n          this.requestLoading = false;\n        });\n    },\n    resetState() {\n      this.resetAppState();\n    }\n  }\n};\n</script>\n\n<style>\n@import \"../../assets/colors.css\";\n\n.card-signing {\n  padding: 30px;\n}\n\n.extraTextStyle {\n  transition: 0.3s ease;\n  color: #b08c62 !important;\n}\n\n.extraTextStyle:hover {\n  transition: 0.3s ease;\n  color: #ad712a !important;\n}\n</style>"]}]}
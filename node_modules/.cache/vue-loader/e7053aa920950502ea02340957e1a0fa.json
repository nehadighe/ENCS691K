{"remainingRequest":"/Users/elchoco/concordia/fall_20_classes/ENCS691/final_project/front/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/elchoco/concordia/fall_20_classes/ENCS691/final_project/front/src/components/Auth/SignUpForm.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/elchoco/concordia/fall_20_classes/ENCS691/final_project/front/src/components/Auth/SignUpForm.vue","mtime":1602977181362},{"path":"/Users/elchoco/concordia/fall_20_classes/ENCS691/final_project/front/node_modules/cache-loader/dist/cjs.js","mtime":1602977161337},{"path":"/Users/elchoco/concordia/fall_20_classes/ENCS691/final_project/front/node_modules/babel-loader/lib/index.js","mtime":1602977174460},{"path":"/Users/elchoco/concordia/fall_20_classes/ENCS691/final_project/front/node_modules/cache-loader/dist/cjs.js","mtime":1602977161337},{"path":"/Users/elchoco/concordia/fall_20_classes/ENCS691/final_project/front/node_modules/vue-loader/lib/index.js","mtime":1602977169995}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IEF1dGggfSBmcm9tICJhd3MtYW1wbGlmeSI7CmltcG9ydCBhdmF0YXIgZnJvbSAiQC9zdG9yZS9hdmF0YXIiOwovLyBpbXBvcnQgVXNlclNlcnZpY2UgZnJvbSAiQC9zZXJ2aWNlcy9Vc2VyIjsKaW1wb3J0IHsgbWFwQWN0aW9ucyB9IGZyb20gInZ1ZXgiOwppbXBvcnQgUmVnaXN0ZXIgZnJvbSAiLi9SZWdpc3RlciI7CmltcG9ydCBWZXJpZmljYXRpb24gZnJvbSAiLi9WZXJpZmljYXRpb24iOwoKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICJTaWduSW5Gb3JtIiwKICBjb21wb25lbnRzOiB7CiAgICBSZWdpc3RlciwKICAgIFZlcmlmaWNhdGlvbgogIH0sCiAgZGF0YTogKCkgPT4gKHsKICAgIHRoZW1lQ29sb3I6ICIjOTAwMDI4IiwKICAgIHVzZXJuYW1lOiAiIiwKICAgIHNuYWNrdGltZW91dDogODAwMCwKICAgIGFsZXJ0OiBmYWxzZSwKICAgIHRleHQ6IG51bGwsCiAgICBjb2xvcjogbnVsbCwKICAgIHJlcXVlc3RMb2FkaW5nOiBmYWxzZSwKICAgIGxvY2FsU2lnblVwU3RhdGU6ICJyZWdpc3RlciIsCiAgICBhdXRoVXNlcjoge30KICB9KSwKICBtZXRob2RzOiB7CiAgICAuLi5tYXBBY3Rpb25zKFsicmVzZXRBcHBTdGF0ZSIsICJ1c2VyU2lnblVwIl0pLAogICAgYXN5bmMgc2lnblVwKGV2ZW50KSB7CiAgICAgIHRoaXMucmVxdWVzdExvYWRpbmcgPSB0cnVlOwogICAgICBpZiAoIWV2ZW50LnZhbGlkKSB7CiAgICAgICAgKHRoaXMudGV4dCA9ICJJbnB1dCBzb21lIHRleHQiKSwKICAgICAgICAgICh0aGlzLmNvbG9yID0gIiM5MDAwMjgiKSwKICAgICAgICAgICh0aGlzLmFsZXJ0ID0gdHJ1ZSk7CiAgICAgICAgdGhpcy5yZXF1ZXN0TG9hZGluZyA9IGZhbHNlOwogICAgICAgIHJldHVybjsKICAgICAgfSBlbHNlIGlmIChldmVudC51c2VyLnBhc3N3b3JkICE9IGV2ZW50LmNvbmZpcm1QYXNzd29yZCkgewogICAgICAgICh0aGlzLnRleHQgPSAiUGFzc3dvcmRzIG11c3QgYmUgc2FtZSIpLAogICAgICAgICAgKHRoaXMuY29sb3IgPSAiIzkwMDAyOCIpLAogICAgICAgICAgKHRoaXMuYWxlcnQgPSB0cnVlKTsKICAgICAgICB0aGlzLnJlcXVlc3RMb2FkaW5nID0gZmFsc2U7CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICAgIHRyeSB7CiAgICAgICAgdGhpcy51c2VybmFtZSA9IGV2ZW50LnVzZXIudXNlcm5hbWU7CiAgICAgICAgbGV0IHVzZXJuYW1lLCBwYXNzd29yZCwgZW1haWw7CiAgICAgICAgdXNlcm5hbWUgPSBldmVudC51c2VyLnVzZXJuYW1lOwogICAgICAgIHBhc3N3b3JkID0gZXZlbnQudXNlci5wYXNzd29yZDsKICAgICAgICBlbWFpbCA9IGV2ZW50LnVzZXIuZW1haWw7CiAgICAgICAgLy8gc2VuZGluZyB0aGlzIGRhdGEgdG8gQ29nbml0bwogICAgICAgIGF3YWl0IEF1dGguc2lnblVwKHsKICAgICAgICAgIHVzZXJuYW1lLAogICAgICAgICAgcGFzc3dvcmQsCiAgICAgICAgICBhdHRyaWJ1dGVzOiB7CiAgICAgICAgICAgIGVtYWlsIC8vIG9wdGlvbmFsCiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgICAgdmFyIHJhbmRvbUF2YXRhciA9IGF2YXRhcltNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiBhdmF0YXIubGVuZ3RoKV07CiAgICAgICAgZXZlbnQudXNlci5hdmF0YXIgPSByYW5kb21BdmF0YXI7CiAgICAgICAgdGhpcy5hdXRoVXNlciA9IGV2ZW50LnVzZXI7CiAgICAgICAgKHRoaXMudGV4dCA9ICJZb3VyIGFjY291bnQgaGFzIGJlZW4gY3JlYXRlZCBzdWNjZXNzZnVsbHkhIiksCiAgICAgICAgICAodGhpcy5jb2xvciA9ICJzdWNjZXNzIiksCiAgICAgICAgICAodGhpcy5hbGVydCA9IHRydWUpOwogICAgICAgIC8vIGNoYW5naW5nIGxvY2FsIHNpZ25VcCBzdGF0ZSBmb3IgYWNjb3VudCB2ZXJpZmljYXRpb24KICAgICAgICB0aGlzLmxvY2FsU2lnblVwU3RhdGUgPSAidmVyaWZpY2F0aW9uIjsKICAgICAgICB0aGlzLnJlcXVlc3RMb2FkaW5nID0gZmFsc2U7CiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7CiAgICAgICAgKHRoaXMudGV4dCA9IGVycm9yLm1lc3NhZ2UpLAogICAgICAgICAgKHRoaXMuY29sb3IgPSAiIzkwMDAyOCIpLAogICAgICAgICAgKHRoaXMuYWxlcnQgPSB0cnVlKTsKICAgICAgICB0aGlzLnJlcXVlc3RMb2FkaW5nID0gZmFsc2U7CiAgICAgIH0KICAgIH0sCiAgICBhc3luYyB2ZXJpZnlDb2RlKGV2ZW50KSB7CiAgICAgIHRoaXMucmVxdWVzdExvYWRpbmcgPSB0cnVlOwogICAgICB0cnkgewogICAgICAgIGF3YWl0IEF1dGguY29uZmlybVNpZ25VcCh0aGlzLnVzZXJuYW1lLCBldmVudC5jb2RlKTsKICAgICAgICAvLyBNYWtpbmcgQVBJIGNhbGwgaW4gdGhlIHRyeSBjbGF1c2UKICAgICAgICAvLyBhd2FpdCBVc2VyU2VydmljZS5wb3N0KGV2ZW50LnVzZXIpLnRoZW4oKCkgPT4gewogICAgICAgIC8vIH0pLmNhdGNoKGVyciA9PiB7CiAgICAgICAgLy8gICBjb25zb2xlLmxvZygnbGluZSA5MSBlcnIgZnJvbSBBUEkgY2FsbC0gJyxlcnIpCiAgICAgICAgLy8gfSk7CiAgICAgICAgdGhpcy5hdXRoVXNlci5hdXRoZW50aWNhdGVkID0gdHJ1ZTsKICAgICAgICB0aGlzLnVzZXJTaWduVXAodGhpcy5hdXRoVXNlcik7IC8vIHNlbmRpbmcgZGF0YSB0byB0aGUgc3RvcmUKICAgICAgICB0aGlzLnJlcXVlc3RMb2FkaW5nID0gZmFsc2U7CiAgICAgICAgdGhpcy4kcm91dGVyLnB1c2goeyBuYW1lOiAiaG9tZSIgfSk7CiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7CiAgICAgICAgKHRoaXMudGV4dCA9IGVycm9yLm1lc3NhZ2UpLAogICAgICAgICAgKHRoaXMuY29sb3IgPSAiIzkwMDAyOCIpLAogICAgICAgICAgKHRoaXMuYWxlcnQgPSB0cnVlKTsKICAgICAgICB0aGlzLnJlcXVlc3RMb2FkaW5nID0gZmFsc2U7CiAgICAgIH0KICAgIH0sCiAgICBhc3luYyByZXNlbnRWZXJpZmljYXRpb24oKSB7CiAgICAgIC8vIHRoaXMgYXZvaWQgb3ZlcmxvYWRpbmcgdGhlIHJlc2VuZCBvZiBldmVudHMgd2l0aG91dCB0aGUgSFRUUCBlcnJvcgogICAgICB0cnkgewogICAgICAgIGF3YWl0IEF1dGgucmVzZW5kU2lnblVwKHRoaXMudXNlcm5hbWUpOwogICAgICAgICh0aGlzLnRleHQgPSAiQ29kZSByZXNlbnQgc3VjY2Vzc2Z1bGx5IiksCiAgICAgICAgICAodGhpcy5jb2xvciA9ICJzdWNjZXNzIiksCiAgICAgICAgICAodGhpcy5hbGVydCA9IHRydWUpOwogICAgICB9IGNhdGNoIChlcnIpIHsKICAgICAgICAodGhpcy50ZXh0ID0gZXJyLm1lc3NhZ2UpLAogICAgICAgICAgKHRoaXMuY29sb3IgPSAiIzkwMDAyOCIpLAogICAgICAgICAgKHRoaXMuYWxlcnQgPSB0cnVlKTsKICAgICAgICBjb25zb2xlLmxvZygiZXJyb3IgcmVzZW5kaW5nIGNvZGU6ICIsIGVycik7CiAgICAgIH0KICAgIH0sCiAgICByZXNldFN0YXRlKCkgewogICAgICB0aGlzLnJlc2V0QXBwU3RhdGUoKTsKICAgIH0KICB9Cn07Cg=="},{"version":3,"sources":["SignUpForm.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+BA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"SignUpForm.vue","sourceRoot":"src/components/Auth","sourcesContent":["<template>\n  <div class>\n    <v-card min-width=\"300\" max-width=\"800\" class=\"card-signing elevation-2\">\n      <!-- data is going to have to be sent down to the children -->\n      <Register\n        v-if=\"localSignUpState === 'register'\"\n        v-on:signUp=\"signUp($event)\"\n        v-on:resetState=\"resetState()\"\n        :requestLoading=\"requestLoading\"\n        :themeColor=\"themeColor\"\n      />\n      <Verification\n        v-if=\"localSignUpState === 'verification'\"\n        v-on:verifyCode=\"verifyCode($event)\"\n        v-on:resentVerification=\"resentVerification()\"\n        :themeColor=\"themeColor\"\n      />\n    </v-card>\n    <!-- Banner -->\n    <v-snackbar :color=\"color\" v-model=\"alert\">\n      <div class=\"d-flex flex-row align-center justify-space-between\">\n        <p class=\"mb-0 white--text\">{{ text }}</p>\n        <v-btn color=\"white\" text @click=\"alert = false\">\n          <v-icon small>mdi-window-close</v-icon>\n        </v-btn>\n      </div>\n    </v-snackbar>\n  </div>\n</template>\n\n<script>\nimport { Auth } from \"aws-amplify\";\nimport avatar from \"@/store/avatar\";\n// import UserService from \"@/services/User\";\nimport { mapActions } from \"vuex\";\nimport Register from \"./Register\";\nimport Verification from \"./Verification\";\n\nexport default {\n  name: \"SignInForm\",\n  components: {\n    Register,\n    Verification\n  },\n  data: () => ({\n    themeColor: \"#900028\",\n    username: \"\",\n    snacktimeout: 8000,\n    alert: false,\n    text: null,\n    color: null,\n    requestLoading: false,\n    localSignUpState: \"register\",\n    authUser: {}\n  }),\n  methods: {\n    ...mapActions([\"resetAppState\", \"userSignUp\"]),\n    async signUp(event) {\n      this.requestLoading = true;\n      if (!event.valid) {\n        (this.text = \"Input some text\"),\n          (this.color = \"#900028\"),\n          (this.alert = true);\n        this.requestLoading = false;\n        return;\n      } else if (event.user.password != event.confirmPassword) {\n        (this.text = \"Passwords must be same\"),\n          (this.color = \"#900028\"),\n          (this.alert = true);\n        this.requestLoading = false;\n        return;\n      }\n      try {\n        this.username = event.user.username;\n        let username, password, email;\n        username = event.user.username;\n        password = event.user.password;\n        email = event.user.email;\n        // sending this data to Cognito\n        await Auth.signUp({\n          username,\n          password,\n          attributes: {\n            email // optional\n          }\n        });\n        var randomAvatar = avatar[Math.floor(Math.random() * avatar.length)];\n        event.user.avatar = randomAvatar;\n        this.authUser = event.user;\n        (this.text = \"Your account has been created successfully!\"),\n          (this.color = \"success\"),\n          (this.alert = true);\n        // changing local signUp state for account verification\n        this.localSignUpState = \"verification\";\n        this.requestLoading = false;\n      } catch (error) {\n        (this.text = error.message),\n          (this.color = \"#900028\"),\n          (this.alert = true);\n        this.requestLoading = false;\n      }\n    },\n    async verifyCode(event) {\n      this.requestLoading = true;\n      try {\n        await Auth.confirmSignUp(this.username, event.code);\n        // Making API call in the try clause\n        // await UserService.post(event.user).then(() => {\n        // }).catch(err => {\n        //   console.log('line 91 err from API call- ',err)\n        // });\n        this.authUser.authenticated = true;\n        this.userSignUp(this.authUser); // sending data to the store\n        this.requestLoading = false;\n        this.$router.push({ name: \"home\" });\n      } catch (error) {\n        (this.text = error.message),\n          (this.color = \"#900028\"),\n          (this.alert = true);\n        this.requestLoading = false;\n      }\n    },\n    async resentVerification() {\n      // this avoid overloading the resend of events without the HTTP error\n      try {\n        await Auth.resendSignUp(this.username);\n        (this.text = \"Code resent successfully\"),\n          (this.color = \"success\"),\n          (this.alert = true);\n      } catch (err) {\n        (this.text = err.message),\n          (this.color = \"#900028\"),\n          (this.alert = true);\n        console.log(\"error resending code: \", err);\n      }\n    },\n    resetState() {\n      this.resetAppState();\n    }\n  }\n};\n</script>\n\n<style>\n@import \"../../assets/colors.css\";\n@import \"../../assets/line.css\";\n\n.card-signing {\n  padding: 30px;\n}\n\n.extraTextStyle {\n  transition: 0.3s ease;\n  color: #b08c62 !important;\n}\n\n.extraTextStyle:hover {\n  transition: 0.3s ease;\n  color: #ad712a !important;\n}\n</style>"]}]}
{"version":3,"sources":["AuthModal.tsx","utils/jwt.ts","App.tsx","serviceWorker.ts","index.tsx"],"names":["AUTH_MODE","generateToken","decodedToken","JSON","parse","token","sign","verify","e","Error","message","decode","refreshToken","issuer","tokenObj","Object","keys","length","iss","exp","Math","floor","Date","now","stringify","AuthModal","props","args","state","currentCognitoToken","currentOIDCTokenDecoded","currentOIDCToken","userName","userGroups","apiKey","possibleGroups","email","supportedAuthModes","API_KEY","isOpen","currentAuthMode","oidcTokenError","parseJWTToken","authModes","selectedAuthMode","onClose","bind","onGroupChange","onGroupAdd","onGenerate","changeAPIKey","changeEmail","onUserNameChange","onOIDCTokenChange","onAuthModeChange","result","authMode","this","cognitoToken","AMAZON_COGNITO_USER_POOLS","OIDCToken","OPENID_CONNECT","iam","AWS_IAM","ev","data","setState","value","formContent","actionText","Form","Field","Input","readOnly","placeholder","onChange","Dropdown","search","options","map","g","key","text","selection","fluid","multiple","allowAdditions","onAddItem","errorLabel","Label","basic","color","pointing","TextArea","rows","spellCheck","authModeOptions","filter","mode","Modal","onActionClick","open","Header","Content","Description","style","marginTop","Actions","Button","primary","onClick","newState","generateCognitoJWTToken","generateOIDCJWTToken","tokenPayload","sub","email_verified","algorithm","phone_number_verified","aud","event_id","token_use","phone_number","Component","DEFAULT_COGNITO_JWT_TOKEN","DEFAULT_OIDC_JWT_TOKEN","AUTH_TYPE_TO_NAME","DEFAULT_API_INFO","name","defaultAuthenticationType","authenticationType","additionalAuthenticationProviders","LOCAL_STORAGE_KEY_NAMES","fetcher","params","additionalHeaders","headers","Accept","fetch","method","body","then","response","json","responseBody","DEFAULT_QUERY","App","rest","_graphiql","schema","query","explorerIsOpen","authModalVisible","apiInfo","credentials","cognitoJWTToken","oidcJWTToken","toggleAuthModal","prevState","switchAuthMode","val","_handleInspectOperation","cm","mousePos","parsedQuery","console","error","getTokenAt","start","line","ch","end","position","indexFromPos","def","definitions","find","definition","loc","log","operationKind","kind","operation","operationName","selector","el","document","querySelector","scrollIntoView","_handleEditQuery","_handleToggleExplorer","loadCredentials","getIntrospectionQuery","introspectionResult","editor","getQueryEditor","setOption","extraKeys","buildClientSchema","window","localStorage","setItem","IAM","authProviders","possibleAuth","auth","includes","getItem","warn","issuers","openIDConnectConfig","Issuer","authModal","storeCredentials","className","onEdit","onRunOperation","handleRunQuery","onToggleExplorer","ref","onEditQuery","Toolbar","handlePrettifyQuery","label","title","handleToggleHistory","Select","onSelect","SelectOption","selected","Boolean","location","hostname","match","ReactDOM","render","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.b0fe84a2.chunk.js","sourcesContent":["import React, { Component } from 'react';\nimport { Button, Form, Modal, Dropdown, Input, TextArea, Label } from 'semantic-ui-react';\nimport { generateToken, parse } from './utils/jwt';\n\nexport enum AUTH_MODE {\n  API_KEY = 'API_KEY',\n  AMAZON_COGNITO_USER_POOLS = 'AMAZON_COGNITO_USER_POOLS',\n  OPENID_CONNECT = 'OPENID_CONNECT',\n  AWS_IAM = 'AWS_IAM',\n}\n\ntype State = {\n  currentCognitoToken?: string;\n  currentOIDCToken: string;\n  currentOIDCTokenDecoded?: string;\n  currentAuthMode: AUTH_MODE;\n  userName?: string;\n  userGroups: string[];\n  email?: string;\n  issuer?: string;\n  apiKey?: string;\n  possibleGroups: string[];\n  isOpen: boolean;\n  supportedAuthModes: AUTH_MODE[];\n  oidcTokenError: string;\n};\n\ntype Props = {\n  onClose: Function;\n  authModes: AUTH_MODE[];\n  selectedAuthMode: AUTH_MODE;\n  currentCognitoToken?: string;\n  currentOIDCToken?: string;\n  apiKey?: string;\n};\nexport class AuthModal extends Component<Props, State> {\n  state: State = {\n    currentCognitoToken: '',\n    currentOIDCTokenDecoded: '',\n    currentOIDCToken: '',\n    userName: '',\n    issuer: '',\n    userGroups: [],\n    apiKey: '',\n    possibleGroups: [],\n    email: '',\n    supportedAuthModes: [AUTH_MODE.API_KEY],\n    isOpen: true,\n    currentAuthMode: AUTH_MODE.API_KEY,\n    oidcTokenError: '',\n  };\n\n  constructor(props, ...args) {\n    super(props, ...args);\n\n    const decodedToken = this.parseJWTToken(this.props.currentCognitoToken) || {};\n    let state = {\n      userName: decodedToken['cognito:username'] || '',\n      userGroups: decodedToken['cognito:groups'] || [],\n      issuer: decodedToken['iss'],\n      email: decodedToken['email'],\n      possibleGroups: decodedToken['cognito:groups'] || [],\n    };\n    this.state = {\n      ...this.state,\n      ...state,\n      currentCognitoToken: this.props.currentCognitoToken || '',\n      currentOIDCToken: this.props.currentOIDCToken || '',\n      currentOIDCTokenDecoded: JSON.stringify(this.parseJWTToken(this.props.currentOIDCToken), null, 4) || '',\n      apiKey: props.apiKey || '',\n      supportedAuthModes: this.props.authModes,\n      currentAuthMode: props.selectedAuthMode,\n    };\n\n    this.onClose = this.onClose.bind(this);\n    this.onGroupChange = this.onGroupChange.bind(this);\n    this.onGroupAdd = this.onGroupAdd.bind(this);\n    this.onGenerate = this.onGenerate.bind(this);\n    this.changeAPIKey = this.changeAPIKey.bind(this);\n    this.changeEmail = this.changeEmail.bind(this);\n    this.onUserNameChange = this.onUserNameChange.bind(this);\n    this.onOIDCTokenChange = this.onOIDCTokenChange.bind(this);\n    this.onAuthModeChange = this.onAuthModeChange.bind(this);\n  }\n\n  onClose() {\n    const result = {\n      authMode: this.state.currentAuthMode,\n      apiKey: this.state.currentAuthMode === AUTH_MODE.API_KEY ? this.state.apiKey : null,\n      cognitoToken: this.state.currentAuthMode === AUTH_MODE.AMAZON_COGNITO_USER_POOLS ? this.state.currentCognitoToken : null,\n      OIDCToken: this.state.currentAuthMode === AUTH_MODE.OPENID_CONNECT ? this.state.currentOIDCToken : null,\n      // We have no data for IAM to store, so we just store a constant string for now\n      iam: this.state.currentAuthMode === AUTH_MODE.AWS_IAM ? 'AWS4-HMAC-SHA256 IAMAuthorized' : null,\n    };\n\n    if (this.props.onClose) {\n      this.props.onClose(result);\n    }\n  }\n  onGroupChange(ev, data) {\n    this.setState({\n      userGroups: data.value,\n    });\n  }\n  onGroupAdd(ev, data) {\n    this.setState({\n      possibleGroups: [...this.state.possibleGroups, data.value],\n    });\n  }\n\n  onUserNameChange(ev, data) {\n    this.setState({\n      userName: data.value,\n    });\n  }\n\n  onOIDCTokenChange(ev, data) {\n    this.setState({\n      currentOIDCTokenDecoded: data.value,\n    });\n  }\n\n  onAuthModeChange(ev, data) {\n    this.setState({\n      currentAuthMode: data.value,\n    });\n  }\n\n  changeEmail(ev, data) {\n    this.setState({\n      email: data.value,\n    });\n  }\n  changeAPIKey(ev, data) {\n    this.setState({\n      apiKey: data.value,\n    });\n  }\n\n  render() {\n    let formContent;\n    let actionText = 'Save';\n    if (this.state.currentAuthMode === AUTH_MODE.API_KEY) {\n      formContent = (\n        <>\n          <Form.Field>\n            <label>ApiKey</label>\n            <Input readOnly placeholder='APIKey' value={this.state.apiKey} onChange={this.changeAPIKey} />\n          </Form.Field>\n        </>\n      );\n    } else if (this.state.currentAuthMode === AUTH_MODE.AMAZON_COGNITO_USER_POOLS) {\n      actionText = 'Generate Token';\n      formContent = (\n        <>\n          <Form.Field>\n            <label>Username</label>\n            <Input placeholder='User Name' value={this.state.userName} onChange={this.onUserNameChange} />\n          </Form.Field>\n          <Form.Field>\n            <label>Groups</label>\n            <Dropdown\n              placeholder='Choose cognito user groups'\n              search\n              options={this.state.possibleGroups.map(g => ({\n                key: g,\n                value: g,\n                text: g,\n              }))}\n              selection\n              fluid\n              multiple\n              allowAdditions\n              value={this.state.userGroups}\n              onAddItem={this.onGroupAdd}\n              onChange={this.onGroupChange}\n            />\n          </Form.Field>\n          <Form.Field>\n            <label>Email</label>\n            <Input placeholder='Email' value={this.state.email} onChange={this.changeEmail} />\n          </Form.Field>\n        </>\n      );\n    } else if (this.state.currentAuthMode === AUTH_MODE.OPENID_CONNECT) {\n      const errorLabel = this.state.oidcTokenError ? (\n        <Label basic color='red' pointing='below'>\n          {this.state.oidcTokenError}\n        </Label>\n      ) : null;\n      formContent = (\n        <>\n          <Form.Field>\n            <label>Decoded OpenID Connect Token</label>\n            {errorLabel}\n            <TextArea\n              onChange={this.onOIDCTokenChange}\n              rows={10}\n              placeholder='Decoded OIDC Token'\n              spellCheck='false'\n              value={this.state.currentOIDCTokenDecoded}\n            />\n          </Form.Field>\n        </>\n      );\n    } else if (this.state.currentAuthMode === AUTH_MODE.AWS_IAM) {\n      formContent = (\n        <>\n          <label>IAM authentication mode has no settings.</label>\n        </>\n      );\n    }\n\n    const authModeOptions = this.state.supportedAuthModes\n      .filter(mode => mode)\n      .map(mode => ({\n        key: mode,\n        value: mode,\n        text: mode,\n      }));\n\n    return (\n      <Modal onClose={this.onClose} onActionClick={this.onGenerate} open={this.state.isOpen}>\n        <Modal.Header>Auth Options</Modal.Header>\n        <Modal.Content>\n          <Modal.Description>\n            <Dropdown\n              placeholder='Auth Mode'\n              selection\n              options={authModeOptions}\n              value={this.state.currentAuthMode}\n              onChange={this.onAuthModeChange}\n            />\n            <div style={{ marginTop: '1em' }}>\n              <Form>{formContent}</Form>\n            </div>\n          </Modal.Description>\n        </Modal.Content>\n        <Modal.Actions>\n          <Button primary onClick={this.onGenerate}>\n            {actionText}\n          </Button>\n        </Modal.Actions>\n      </Modal>\n    );\n  }\n  onGenerate() {\n    try {\n      const newState = {\n        isOpen: false,\n      };\n      if (this.state.currentAuthMode === AUTH_MODE.AMAZON_COGNITO_USER_POOLS) {\n        newState['currentCognitoToken'] = this.generateCognitoJWTToken();\n      } else if (this.state.currentAuthMode === AUTH_MODE.OPENID_CONNECT) {\n        newState['currentOIDCToken'] = this.generateOIDCJWTToken();\n      }\n      this.setState(newState, () => {\n        this.onClose();\n      });\n    } catch (e) {}\n  }\n\n  generateCognitoJWTToken() {\n    const tokenPayload: any = {\n      sub: '7d8ca528-4931-4254-9273-ea5ee853f271',\n      'cognito:groups': [],\n      email_verified: true,\n      algorithm: 'HS256',\n      iss: 'https://cognito-idp.us-east-1.amazonaws.com/us-east-1_fake_idp',\n      phone_number_verified: true,\n      'cognito:username': '',\n      'cognito:roles': [],\n      aud: '2hifa096b3a24mvm3phskuaqi3',\n      event_id: '18f4067e-9985-4eae-9f33-f45f495470d0',\n      token_use: 'id',\n      phone_number: '+12062062016',\n      exp: Math.floor(Date.now() / 1000) + 60 * 60 * 12,\n      email: this.state.email,\n    };\n    tokenPayload['cognito:username'] = this.state.userName;\n    tokenPayload['cognito:groups'] = this.state.userGroups;\n    tokenPayload['auth_time'] = Math.floor(Date.now() / 1000); // In seconds\n\n    const token = generateToken(tokenPayload);\n    return token;\n  }\n\n  generateOIDCJWTToken() {\n    const tokenPayload = this.state.currentOIDCTokenDecoded || '';\n    try {\n      return generateToken(tokenPayload);\n    } catch (e) {\n      this.setState({\n        oidcTokenError: e.message,\n      });\n      throw e;\n    }\n  }\n  parseJWTToken(token) {\n    return parse(token);\n  }\n}\n","import { decode, sign, verify } from 'jsonwebtoken';\n\nexport function generateToken(decodedToken: string | object): string {\n  try {\n    if (typeof decodedToken === 'string') {\n      decodedToken = JSON.parse(decodedToken);\n    }\n    const token = sign(decodedToken, 'open-secrete');\n    verify(token, 'open-secrete');\n    return token;\n  } catch (e) {\n    const err = new Error('Error when generating OIDC token: ' + e.message);\n    throw err;\n  }\n}\n\nexport function parse(token): object {\n  const decodedToken = decode(token);\n  return decodedToken;\n}\n\n/**\n * Updates the exp time of the static token to ensure the shipped token is fresh. If user passes an\n * issuer, updates the token with the issuer\n * @param token\n * @param issuer\n */\nexport function refreshToken(token: string, issuer?: string): string {\n  const tokenObj: any = parse(token);\n  if (!Object.keys(tokenObj).length) {\n    throw new Error(`Invalid token ${token}`);\n  }\n  if (issuer) {\n    tokenObj.iss = issuer;\n  }\n  tokenObj.exp = Math.floor(Date.now() / 100 + 20000);\n  return generateToken(JSON.stringify(tokenObj));\n}\n","import GraphiQL from 'graphiql';\nimport GraphiQLExplorer from 'graphiql-explorer';\nimport 'graphiql/graphiql.css';\nimport { buildClientSchema, getIntrospectionQuery, GraphQLSchema, parse } from 'graphql';\nimport React, { Component } from 'react';\nimport 'semantic-ui-css/semantic.min.css';\nimport './App.css';\nimport { AuthModal, AUTH_MODE } from './AuthModal';\nimport { refreshToken } from './utils/jwt';\n\nconst DEFAULT_COGNITO_JWT_TOKEN = `eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiI3ZDhjYTUyOC00OTMxLTQyNTQtOTI3My1lYTVlZTg1M2YyNzEiLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiaXNzIjoiaHR0cHM6Ly9jb2duaXRvLWlkcC51cy1lYXN0LTEuYW1hem9uYXdzLmNvbS91cy1lYXN0LTFfZmFrZSIsInBob25lX251bWJlcl92ZXJpZmllZCI6dHJ1ZSwiY29nbml0bzp1c2VybmFtZSI6InVzZXIxIiwiYXVkIjoiMmhpZmEwOTZiM2EyNG12bTNwaHNrdWFxaTMiLCJldmVudF9pZCI6ImIxMmEzZTJmLTdhMzYtNDkzYy04NWIzLTIwZDgxOGJkNzhhMSIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxOTc0MjY0NDEyLCJwaG9uZV9udW1iZXIiOiIrMTIwNjIwNjIwMTYiLCJleHAiOjE1NjQyNjgwMTIsImlhdCI6MTU2NDI2NDQxMywiZW1haWwiOiJ1c2VyQGRvbWFpbi5jb20ifQ.wHKY2KIhvWn4zpJ4TZ1vS3zRE9mGWsLY4NCV2Cof17Q`;\nconst DEFAULT_OIDC_JWT_TOKEN = `eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJ1c2VyMSIsImVtYWlsX3ZlcmlmaWVkIjp0cnVlLCJpc3MiOiJodHRwczovL3NvbWUtb2lkYy1wcm92aWRlci9hdXRoIiwicGhvbmVfbnVtYmVyX3ZlcmlmaWVkIjp0cnVlLCJhdWQiOiIyaGlmYTA5NmIzYTI0bXZtM3Boc2t1YXFpMyIsImV2ZW50X2lkIjoiYjEyYTNlMmYtN2EzNi00OTNjLTg1YjMtMjBkODE4YmQ3OGExIiwidG9rZW5fdXNlIjoiaWQiLCJhdXRoX3RpbWUiOjE5NzQyNjQ0MTIsInBob25lX251bWJlciI6IisxMjA2MjA2MjAxNiIsImV4cCI6MTU2NDI2ODAxMiwiaWF0IjoxNTY0MjY0NDEzLCJlbWFpbCI6InVzZXJAZG9tYWluLmNvbSJ9.uAegFXomOnA7Dkl-5FcS5icu5kL9Juqb81GnTrOZZqM`;\n\nconst AUTH_TYPE_TO_NAME = {\n  AMAZON_COGNITO_USER_POOLS: 'User Pool',\n  API_KEY: 'API Key',\n  OPENID_CONNECT: 'Open ID',\n  AWS_IAM: 'IAM',\n};\n\ntype AmplifyAppSyncSimulatorAuthInfo = {\n  authenticationType: string;\n};\ntype AmplifyAppSyncSimulatorApiInfo = {\n  name: string;\n  defaultAuthenticationType: AmplifyAppSyncSimulatorAuthInfo;\n  apiKey: string;\n  additionalAuthenticationProviders: AmplifyAppSyncSimulatorAuthInfo[];\n};\nconst DEFAULT_API_INFO: AmplifyAppSyncSimulatorApiInfo = {\n  name: 'AppSyncTransformer',\n  defaultAuthenticationType: {\n    authenticationType: 'API_KEY',\n  },\n  additionalAuthenticationProviders: [],\n  apiKey: 'da2-fakeApiId123456',\n};\n\nconst LOCAL_STORAGE_KEY_NAMES = {\n  cognitoToken: 'AMPLIFY_GRPAHIQL_EXPLORER_COGNITO_JWT_TOKEN',\n  oidcToken: 'AMPLIFY_GRPAHIQL_EXPLORER_OIDC_JWT_TOKEN',\n  apiKey: 'AMPLIFY_GRPAHIQL_EXPLORER_API_KEY',\n  iam: 'AMPLIFY_GRPAHIQL_EXPLORER_AWS_IAM',\n};\n\nfunction getAPIInfo() {\n  return fetch('/api-config').then(response => response.json());\n}\n\nfunction fetcher(params: Object, additionalHeaders): Promise<any> {\n  const headers = {\n    Accept: 'application/json',\n    'Content-Type': 'application/json',\n    ...additionalHeaders,\n  };\n  return fetch('/graphql', {\n    method: 'POST',\n    headers,\n    body: JSON.stringify(params),\n  })\n    .then(function(response) {\n      return response.json();\n    })\n    .then(function(responseBody) {\n      try {\n        return JSON.parse(responseBody);\n      } catch (e) {\n        return responseBody;\n      }\n    });\n}\n\nconst DEFAULT_QUERY = `# shift-option/alt-click on a query below to jump to it in the explorer\n# option/alt-click on a field in the explorer to select all subfields\n`;\n\ntype State = {\n  schema?: GraphQLSchema | null;\n  query: string;\n  explorerIsOpen: boolean;\n  authModalVisible: boolean;\n  jwtToken?: string;\n  apiKey?: string;\n  apiInfo: AmplifyAppSyncSimulatorApiInfo;\n  currentAuthMode: AUTH_MODE;\n  credentials: {\n    apiKey?: string;\n    cognitoJWTToken?: string;\n    oidcJWTToken?: string;\n    iam?: string;\n  };\n};\n\nclass App extends Component<{}, State> {\n  _graphiql: GraphiQL;\n  state: State = {\n    schema: null,\n    query: DEFAULT_QUERY,\n    explorerIsOpen: true,\n    authModalVisible: false,\n    apiInfo: DEFAULT_API_INFO,\n    currentAuthMode: AUTH_MODE.API_KEY,\n    credentials: {\n      apiKey: '',\n      cognitoJWTToken: '',\n      oidcJWTToken: '',\n      iam: '',\n    },\n  };\n\n  constructor(props, ...rest) {\n    super(props, ...rest);\n    this.fetch = this.fetch.bind(this);\n  }\n  async componentDidMount() {\n    const apiInfo = await getAPIInfo();\n    this.loadCredentials(apiInfo);\n    this.setState({ apiInfo });\n    const introspectionResult = await this.fetch({\n      query: getIntrospectionQuery(),\n    });\n\n    const editor = this._graphiql.getQueryEditor();\n    editor.setOption('extraKeys', {\n      ...(editor.options.extraKeys || {}),\n      'Shift-Alt-LeftClick': this._handleInspectOperation,\n    });\n    if (introspectionResult && introspectionResult.data) {\n      this.setState({ schema: buildClientSchema(introspectionResult.data) });\n    }\n  }\n\n  toggleAuthModal = () =>\n    this.setState(prevState => ({\n      authModalVisible: !prevState.authModalVisible,\n    }));\n\n  switchAuthMode = val => {\n    this.setState({ currentAuthMode: val });\n  };\n  _handleInspectOperation = (cm: any, mousePos: { line: Number; ch: Number }) => {\n    const parsedQuery = parse(this.state.query || '');\n\n    if (!parsedQuery) {\n      console.error(\"Couldn't parse query document\");\n      return null;\n    }\n\n    var token = cm.getTokenAt(mousePos);\n    var start = { line: mousePos.line, ch: token.start };\n    var end = { line: mousePos.line, ch: token.end };\n    var relevantMousePos = {\n      start: cm.indexFromPos(start),\n      end: cm.indexFromPos(end),\n    };\n\n    var position = relevantMousePos;\n\n    var def = parsedQuery.definitions.find(definition => {\n      if (!definition.loc) {\n        console.log('Missing location information for definition');\n        return false;\n      }\n\n      const { start, end } = definition.loc;\n      return start <= position.start && end >= position.end;\n    });\n\n    if (!def) {\n      console.error(`Unable to find definition corresponding position at ${position.start}`);\n      return null;\n    }\n\n    var operationKind = def.kind === 'OperationDefinition' ? def.operation : def.kind === 'FragmentDefinition' ? 'fragment' : 'unknown';\n\n    var operationName =\n      def.kind === 'OperationDefinition' && !!def.name\n        ? def.name.value\n        : def.kind === 'FragmentDefinition' && !!def.name\n        ? def.name.value\n        : 'unknown';\n\n    var selector = `.graphiql-explorer-root #${operationKind}-${operationName}`;\n\n    var el = document.querySelector(selector);\n    el && el.scrollIntoView();\n  };\n\n  _handleEditQuery = (query: string): void => this.setState({ query });\n\n  _handleToggleExplorer = () => {\n    this.setState({ explorerIsOpen: !this.state.explorerIsOpen });\n  };\n\n  fetch(params) {\n    const headers = {};\n    if (this.state.currentAuthMode === AUTH_MODE.API_KEY) {\n      headers['x-api-key'] = this.state.credentials.apiKey;\n    } else if (this.state.currentAuthMode === AUTH_MODE.AMAZON_COGNITO_USER_POOLS) {\n      headers['Authorization'] = this.state.credentials.cognitoJWTToken;\n    } else if (this.state.currentAuthMode === AUTH_MODE.OPENID_CONNECT) {\n      headers['Authorization'] = this.state.credentials.oidcJWTToken;\n    } else if (this.state.currentAuthMode === AUTH_MODE.AWS_IAM) {\n      headers['Authorization'] = this.state.credentials.iam;\n    }\n    return fetcher(params, headers);\n  }\n\n  storeCredentials(credentials) {\n    const apiInfo = this.state.apiInfo;\n    const newState = {\n      apiInfo: { ...apiInfo, authenticationType: credentials.authMode },\n    };\n    if (credentials.authMode === 'API_KEY') {\n      newState['apiKey'] = credentials.apiKey;\n      window.localStorage.setItem(LOCAL_STORAGE_KEY_NAMES.apiKey, credentials.apiKey);\n    } else if (credentials.authMode === AUTH_MODE.AMAZON_COGNITO_USER_POOLS) {\n      newState['cognitoJWTToken'] = credentials.cognitoToken;\n      window.localStorage.setItem(LOCAL_STORAGE_KEY_NAMES.cognitoToken, credentials.cognitoToken);\n    } else if (credentials.authMode === AUTH_MODE.OPENID_CONNECT) {\n      newState['oidcJWTToken'] = credentials.OIDCToken;\n      window.localStorage.setItem(LOCAL_STORAGE_KEY_NAMES.oidcToken, credentials.OIDCToken);\n    } else if (credentials.authMode === AUTH_MODE.AWS_IAM) {\n      newState['oidcJWTToken'] = credentials.IAM;\n      window.localStorage.setItem(LOCAL_STORAGE_KEY_NAMES.iam, credentials.iam);\n    }\n    this.setState(prevState => ({\n      credentials: {\n        ...prevState.credentials,\n        ...newState,\n      },\n      currentAuthMode: credentials.authMode,\n    }));\n  }\n\n  loadCredentials(apiInfo = this.state.apiInfo) {\n    const credentials = {};\n    const authProviders = [apiInfo.defaultAuthenticationType, ...apiInfo.additionalAuthenticationProviders];\n    const possibleAuth = authProviders.map(auth => auth.authenticationType);\n\n    if (possibleAuth.includes('API_KEY')) {\n      credentials['apiKey'] = DEFAULT_API_INFO.apiKey;\n    }\n\n    if (possibleAuth.includes('AMAZON_COGNITO_USER_POOLS')) {\n      try {\n        credentials['cognitoJWTToken'] = refreshToken(window.localStorage.getItem(LOCAL_STORAGE_KEY_NAMES.cognitoToken) || '');\n      } catch (e) {\n        console.warn('Invalid Cognito token found in local storage. Using the default OIDC token');\n        // token is not valid\n        credentials['cognitoJWTToken'] = refreshToken(DEFAULT_COGNITO_JWT_TOKEN);\n      }\n    }\n\n    if (possibleAuth.includes('OPENID_CONNECT')) {\n      const issuers = authProviders\n        .filter(auth => auth.authenticationType === AUTH_MODE.OPENID_CONNECT)\n        .map((auth: any) => auth.openIDConnectConfig.Issuer);\n      try {\n        credentials['oidcJWTToken'] = refreshToken(window.localStorage.getItem(LOCAL_STORAGE_KEY_NAMES.oidcToken) || '', issuers[0]);\n      } catch (e) {\n        console.warn('Invalid OIDC token found in local storage. Using the default OIDC token');\n        credentials['oidcJWTToken'] = refreshToken(DEFAULT_OIDC_JWT_TOKEN, issuers[0]);\n      }\n    }\n\n    if (possibleAuth.includes('AWS_IAM')) {\n      credentials['iam'] = 'AWS4-HMAC-SHA256 IAMAuthorized';\n    }\n\n    this.setState(() => ({\n      currentAuthMode: AUTH_MODE[apiInfo.defaultAuthenticationType.authenticationType] || AUTH_MODE.API_KEY,\n    }));\n    this.setState({ credentials });\n    return credentials;\n  }\n\n  render() {\n    const { query, schema, authModalVisible, apiInfo } = this.state;\n    const authModes = [\n      AUTH_MODE[apiInfo.defaultAuthenticationType.authenticationType],\n      ...apiInfo.additionalAuthenticationProviders.map(auth => AUTH_MODE[auth.authenticationType]),\n    ].filter(auth => auth);\n    const authModal = authModalVisible ? (\n      <AuthModal\n        selectedAuthMode={this.state.currentAuthMode}\n        currentOIDCToken={this.state.credentials.oidcJWTToken}\n        currentCognitoToken={this.state.credentials.cognitoJWTToken}\n        apiKey={this.state.credentials.apiKey}\n        authModes={authModes}\n        onClose={credentials => {\n          this.storeCredentials(credentials);\n          this.setState({ authModalVisible: false });\n        }}\n      />\n    ) : null;\n    return (\n      <>\n        {authModal}\n        <div className='graphiql-container'>\n          <GraphiQLExplorer\n            schema={schema}\n            query={query}\n            onEdit={this._handleEditQuery}\n            onRunOperation={operationName => this._graphiql.handleRunQuery(operationName)}\n            explorerIsOpen={this.state.explorerIsOpen}\n            onToggleExplorer={this._handleToggleExplorer}\n          />\n          <GraphiQL\n            ref={ref => (this._graphiql = ref)}\n            fetcher={this.fetch}\n            schema={schema}\n            query={query}\n            onEditQuery={this._handleEditQuery}\n          >\n            <GraphiQL.Toolbar>\n              <GraphiQL.Button\n                onClick={() => this._graphiql.handlePrettifyQuery()}\n                label='Prettify'\n                title='Prettify Query (Shift-Ctrl-P)'\n              />\n              <GraphiQL.Button onClick={() => this._graphiql.handleToggleHistory()} label='History' title='Show History' />\n              <GraphiQL.Button onClick={this._handleToggleExplorer} label='Explorer' title='Toggle Explorer' />\n              <GraphiQL.Button onClick={this.toggleAuthModal} label='Update Auth' title='Auth Setting' />\n              <GraphiQL.Select label='Auth' onSelect={this.switchAuthMode}>\n                {authModes.map(mode => (\n                  <GraphiQL.SelectOption\n                    label={`Use: ${AUTH_TYPE_TO_NAME[mode]}`}\n                    value={mode}\n                    key={mode}\n                    selected={mode === this.state.currentAuthMode}\n                  />\n                ))}\n              </GraphiQL.Select>\n            </GraphiQL.Toolbar>\n          </GraphiQL>\n        </div>\n      </>\n    );\n  }\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(/^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/)\n);\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL((process as { env: { [key: string]: string } }).env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log('This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA');\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log('New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA.');\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (response.status === 404 || (contentType != null && contentType.indexOf('javascript') === -1)) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log('No internet connection found. App is running in offline mode.');\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}